{
    "sourceFile": "backend/routes/foods_route.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 8,
            "patches": [
                {
                    "date": 1740476138182,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1740477152406,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -29,9 +29,9 @@\n     try {\r\n         const newResult = await result.save();\r\n         res.status(201).json(newResult);\r\n     } catch (error) {\r\n-        res.status(400).json({ message: error.message });\r\n+        res.status(400).json({ เสียวๆว่ะ,message: error.message });\r\n     }\r\n });\r\n \r\n router.put('/:id', async (req, res) => {\r\n"
                },
                {
                    "date": 1740477159838,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -29,9 +29,9 @@\n     try {\r\n         const newResult = await result.save();\r\n         res.status(201).json(newResult);\r\n     } catch (error) {\r\n-        res.status(400).json({ เสียวๆว่ะ,message: error.message });\r\n+        res.status(400).json({ \"เสียวๆว่ะ\"+message: error.message });\r\n     }\r\n });\r\n \r\n router.put('/:id', async (req, res) => {\r\n"
                },
                {
                    "date": 1740477165684,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -29,9 +29,9 @@\n     try {\r\n         const newResult = await result.save();\r\n         res.status(201).json(newResult);\r\n     } catch (error) {\r\n-        res.status(400).json({ \"เสียวๆว่ะ\"+message: error.message });\r\n+        res.status(400).json({ เสียวๆว่ะ,message: error.message });\r\n     }\r\n });\r\n \r\n router.put('/:id', async (req, res) => {\r\n"
                },
                {
                    "date": 1740477185096,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -29,9 +29,9 @@\n     try {\r\n         const newResult = await result.save();\r\n         res.status(201).json(newResult);\r\n     } catch (error) {\r\n-        res.status(400).json({ เสียวๆว่ะ,message: error.message });\r\n+        res.status(400).json({ message: error.message });\r\n     }\r\n });\r\n \r\n router.put('/:id', async (req, res) => {\r\n"
                },
                {
                    "date": 1740477815559,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -61,9 +61,9 @@\n         if (req.body.customOptions != null) {\r\n             data.customOptions = req.body.customOptions;\r\n         }\r\n         if (req.body.image != null) {\r\n-            res.result.image = req.body.image;\r\n+            data.result.image = req.body.image;\r\n         }\r\n \r\n         const updatedData = await data.save();\r\n \r\n"
                },
                {
                    "date": 1740477954786,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,18 +35,15 @@\n });\r\n \r\n router.put('/:id', async (req, res) => {\r\n     try {\r\n-\r\n-        //params \r\n         const id = req.params.id;\r\n \r\n-        //FIND IN DB  \r\n         const data = await dataDB.findById(id);\r\n \r\n-        //check db\r\n         if (!data) return res.status(404).json({ message: 'ไม่พบอาหารในระบบ' });\r\n \r\n+        res.json({ message: 'อีสัสนี่' });\r\n         if (req.body.name != null) {\r\n             data.name = req.body.name;\r\n         }\r\n         if (req.body.category_id != null) {\r\n"
                },
                {
                    "date": 1740478053976,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -41,9 +41,8 @@\n         const data = await dataDB.findById(id);\r\n \r\n         if (!data) return res.status(404).json({ message: 'ไม่พบอาหารในระบบ' });\r\n \r\n-        res.json({ message: 'อีสัสนี่' });\r\n         if (req.body.name != null) {\r\n             data.name = req.body.name;\r\n         }\r\n         if (req.body.category_id != null) {\r\n"
                },
                {
                    "date": 1740478074794,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -57,9 +57,9 @@\n         if (req.body.customOptions != null) {\r\n             data.customOptions = req.body.customOptions;\r\n         }\r\n         if (req.body.image != null) {\r\n-            data.result.image = req.body.image;\r\n+            data.image = req.body.image;\r\n         }\r\n \r\n         const updatedData = await data.save();\r\n \r\n"
                }
            ],
            "date": 1740476138182,
            "name": "Commit-0",
            "content": "const express = require('express');\r\nconst router = express.Router();\r\n\r\nconst dataDB = require('../models/foods');\r\n\r\nrouter.get('/', async (req, res) => {\r\n    try {\r\n        const result = await dataDB.find();\r\n        res.json(result);\r\n    } catch (error) {\r\n        res.status(500).json({ message: error.message });\r\n    }\r\n});\r\n\r\nrouter.get('/:id', async (req, res) => {\r\n    res.json(res.result);\r\n});\r\n\r\nrouter.post('/', async (req, res) => {\r\n    const result = new dataDB({\r\n        name: req.body.name,\r\n        category_id: req.body.category_id,\r\n        category: req.body.category,\r\n        image:  req.body.image,\r\n        sizePrices: req.body.sizePrices,\r\n        customOptions: req.body.customOptions\r\n    });\r\n\r\n    try {\r\n        const newResult = await result.save();\r\n        res.status(201).json(newResult);\r\n    } catch (error) {\r\n        res.status(400).json({ message: error.message });\r\n    }\r\n});\r\n\r\nrouter.put('/:id', async (req, res) => {\r\n    try {\r\n\r\n        //params \r\n        const id = req.params.id;\r\n\r\n        //FIND IN DB  \r\n        const data = await dataDB.findById(id);\r\n\r\n        //check db\r\n        if (!data) return res.status(404).json({ message: 'ไม่พบอาหารในระบบ' });\r\n\r\n        if (req.body.name != null) {\r\n            data.name = req.body.name;\r\n        }\r\n        if (req.body.category_id != null) {\r\n            data.category_id = req.body.category_id;\r\n        }\r\n        if (req.body.category != null) {\r\n            data.category = req.body.category;\r\n        }\r\n        if (req.body.sizePrices != null) {\r\n            data.sizePrices = req.body.sizePrices;\r\n        }\r\n        if (req.body.customOptions != null) {\r\n            data.customOptions = req.body.customOptions;\r\n        }\r\n        if (req.body.image != null) {\r\n            res.result.image = req.body.image;\r\n        }\r\n\r\n        const updatedData = await data.save();\r\n\r\n        res.json(updatedData);\r\n    } catch (error) {\r\n        res.status(400).json({ message: error.message });\r\n    }\r\n});\r\n\r\nrouter.delete('/:id', async (req, res) => {\r\n    try {\r\n        await dataDB.findByIdAndDelete(req.params.id)\r\n        res.json({ message: 'ลบรายการอาหารออกจาก Database เรียบร้อยแล้ว' });\r\n    } catch (error) {\r\n        res.status(500).json({ message: error.message });\r\n    }\r\n});\r\n\r\nmodule.exports = router;"
        }
    ]
}