{
    "sourceFile": "FoodMood/src/pages/UserManager/assets/EditUser.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 25,
            "patches": [
                {
                    "date": 1740643706658,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1740643736759,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,13 +1,13 @@\n import axios from 'axios';\r\n import React, { useState, useEffect } from 'react';\r\n \r\n-const EditUser = ({ user, onClose, onSave, isEditing}) => {\r\n+const EditUser = ({ user, onClose, onSave, isEditing }) => {\r\n \r\n     const [editedUser, setEditedUser] = useState({\r\n         name: '',\r\n         username: '',\r\n-        password:  '',\r\n+        password: '',\r\n         role_id: '',\r\n         phone_number: '',\r\n     });\r\n     const [selectPosition, setSelectPosition] = useState('');\r\n@@ -55,9 +55,9 @@\n     const handleSave = (e) => {\r\n \r\n         if (!editedUser.name) { setErrorName(true); return; } setErrorName(false);\r\n         if (!selectPosition) { setErrorRole(true); return; } setErrorRole(false);\r\n-        if (selectPosition === 'เจ้าของร้าน' && !editedUser.username) { setErrorUsername(true); return;} setErrorUsername(false);\r\n+        if (selectPosition === 'เจ้าของร้าน' && !editedUser.username) { setErrorUsername(true); return; } setErrorUsername(false);\r\n         if (!editedUser.password) { setErrorPassword(true); return; } setErrorPassword(false);\r\n         if (!editedUser.phone_number) { setErrorPhone(true); return; } setErrorPhone(false);\r\n \r\n \r\n@@ -72,83 +72,83 @@\n     };\r\n \r\n     return (\r\n         <>\r\n-                <div className=\"fs-20 fw-5 text-center right-box-header\" style={{ marginBottom: '10px' }}>\r\n-                    {isEditing ? 'แก้ไขผู้ใช้งาน' : 'เพิ่มผู้ใช้ใหม่'}\r\n-                </div>\r\n+            <div className=\"fs-20 fw-5 text-center right-box-header\" style={{ marginBottom: '10px' }}>\r\n+                {isEditing ? 'แก้ไขผู้ใช้งาน' : 'เพิ่มผู้ใช้ใหม่'}\r\n+            </div>\r\n \r\n-                <label>ชื่อพนักงาน</label>\r\n-                <input\r\n-                    type=\"text\"\r\n-                    name=\"name\"\r\n-                    value={editedUser.name || ''}\r\n-                    onChange={handleChange}\r\n-                    required\r\n-                />\r\n-                {errorName && <div className='text-red'>กรุณากรอกชื่อ</div>}\r\n+            <label>ชื่อพนักงาน</label>\r\n+            <input\r\n+                type=\"text\"\r\n+                name=\"name\"\r\n+                value={editedUser.name || ''}\r\n+                onChange={handleChange}\r\n+                required\r\n+            />\r\n+            {errorName && <div className='text-red'>กรุณากรอกชื่อ</div>}\r\n \r\n-                <div style={{height:'10px'}} />\r\n-                <label>ตำแหน่ง (Role)</label>\r\n-                <select\r\n-                    className=\"form-select\"\r\n-                    name=\"role\"\r\n-                    value={selectPosition}\r\n-                    onChange={handleRoleChange}\r\n-                    \r\n-                    required\r\n-                >\r\n-                    <option value=\"\" disabled>-- เลือกตำแหน่ง --</option>\r\n-                    {roleList.map((item,index) => (\r\n-                        <option key={index} value={item._id}>{item.role_name}</option>\r\n-                    ))}\r\n-                </select>\r\n-                {errorRole && <div className='text-red'>กรุณาเลือกตำแหน่ง</div>}\r\n+            <div style={{ height: '10px' }} />\r\n+            <label>ตำแหน่ง (Role)</label>\r\n+            <select\r\n+                className=\"form-select\"\r\n+                name=\"role\"\r\n+                value={selectPosition}\r\n+                onChange={handleRoleChange}\r\n \r\n-                <div style={{height:'10px'}} />\r\n-                <label>Username</label>\r\n-                <input\r\n-                    type='text'\r\n-                    name=\"username\"\r\n-                    value={editedUser.username}\r\n-                    onChange={handleChange}\r\n-                    disabled = {editedUser.role_id != \"1\" ? true : false}\r\n-                />\r\n-                {errorUsername && <div className='text-red'>กรุณากรอก Username</div>}\r\n+                required\r\n+            >\r\n+                <option value=\"\" disabled>-- เลือกตำแหน่ง --</option>\r\n+                {roleList.map((item, index) => (\r\n+                    <option key={index} value={item._id}>{item.role_name}</option>\r\n+                ))}\r\n+            </select>\r\n+            {errorRole && <div className='text-red'>กรุณาเลือกตำแหน่ง</div>}\r\n \r\n-                <div style={{height:'10px'}} />\r\n-                <label>{editedUser.role === 'เจ้าของร้าน' ? 'Password' : 'รหัส PIN 6 หลัก'}</label>\r\n-                <input\r\n-                    type={editedUser.role === 'เจ้าของร้าน' ? 'password' : 'text'}\r\n-                    name=\"password\"\r\n-                    value={editedUser.password || ''}\r\n-                    onChange={handleChange}\r\n-                    minLength={6}\r\n-                    maxLength={editedUser.role !== 'เจ้าของร้าน' ? 6 : undefined} // Limit PIN to 6 digits\r\n-                    required\r\n-                />\r\n-                {errorPassword && <div className='text-red'>กรุณากรอกรหัสผ่าน</div>}\r\n+            <div style={{ height: '10px' }} />\r\n+            <label>Username</label>\r\n+            <input\r\n+                type='text'\r\n+                name=\"username\"\r\n+                value={editedUser.username}\r\n+                onChange={handleChange}\r\n+                disabled={editedUser.role_id != \"1\" ? true : false}\r\n+            />\r\n+            {errorUsername && <div className='text-red'>กรุณากรอก Username</div>}\r\n \r\n-                <div style={{height:'10px'}} />\r\n-                <label>เบอร์โทรศัพท์</label>\r\n-                <input\r\n-                    type=\"text\"\r\n-                    name=\"phone_number\"\r\n-                    placeholder='เช่น 0812345678'\r\n-                    maxLength=\"10\"\r\n-                    value={editedUser.phone_number || ''}\r\n-                    onChange={handleChange}\r\n-                    minLength={10}\r\n-                    maxLength={10}\r\n-                    required\r\n-                />\r\n-                {errorPhone && <div className='text-red'>กรุณากรอกเบอร์โทรศัพท์</div>}\r\n+            <div style={{ height: '10px' }} />\r\n+            <label>{editedUser.role === 'เจ้าของร้าน' ? 'Password' : 'รหัส PIN 6 หลัก'}</label>\r\n+            <input\r\n+                type={editedUser.role === 'เจ้าของร้าน' ? 'password' : 'text'}\r\n+                name=\"password\"\r\n+                value={editedUser.password || ''}\r\n+                onChange={handleChange}\r\n+                minLength={6}\r\n+                maxLength={editedUser.role !== 'เจ้าของร้าน' ? 6 : undefined} // Limit PIN to 6 digits\r\n+                required\r\n+            />\r\n+            {errorPassword && <div className='text-red'>กรุณากรอกรหัสผ่าน</div>}\r\n \r\n-                <div className=\"order-action-buttons\">\r\n-                    <button className=\"blue-button\" onClick={()=>handleSave()}>บันทึก</button>\r\n-                    <button className=\"red-button\" onClick={onClose}>ยกเลิก</button>\r\n-                </div>\r\n-            \r\n+            <div style={{ height: '10px' }} />\r\n+            <label>เบอร์โทรศัพท์</label>\r\n+            <input\r\n+                type=\"text\"\r\n+                name=\"phone_number\"\r\n+                placeholder='เช่น 0812345678'\r\n+                maxLength=\"10\"\r\n+                value={editedUser.phone_number || ''}\r\n+                onChange={handleChange}\r\n+                minLength={10}\r\n+                maxLength={10}\r\n+                required\r\n+            />\r\n+            {errorPhone && <div className='text-red'>กรุณากรอกเบอร์โทรศัพท์</div>}\r\n+\r\n+            <div className=\"order-action-buttons\">\r\n+                <button className=\"blue-button\" onClick={() => handleSave()}>บันทึก</button>\r\n+                <button className=\"red-button\" onClick={onClose}>ยกเลิก</button>\r\n+            </div>\r\n+\r\n         </>\r\n     );\r\n };\r\n \r\n"
                },
                {
                    "date": 1740644702572,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,17 +1,18 @@\n import axios from 'axios';\r\n import React, { useState, useEffect } from 'react';\r\n+import { Visibility, VisibilityOff } from '@mui/icons-material';\r\n \r\n const EditUser = ({ user, onClose, onSave, isEditing }) => {\r\n-\r\n     const [editedUser, setEditedUser] = useState({\r\n         name: '',\r\n         username: '',\r\n         password: '',\r\n         role_id: '',\r\n         phone_number: '',\r\n     });\r\n     const [selectPosition, setSelectPosition] = useState('');\r\n+    const [showPassword, setShowPassword] = useState(false); // State for toggling password visibility\r\n \r\n     useEffect(() => {\r\n         setEditedUser({\r\n             name: user.name,\r\n@@ -24,22 +25,12 @@\n     }, [user]);\r\n \r\n     const [roleList, setRoleList] = useState([]);\r\n \r\n-    //error state\r\n-    const [errorName, setErrorName] = useState(false);\r\n-    const [errorRole, setErrorRole] = useState(false);\r\n-    const [errorUsername, setErrorUsername] = useState(false);\r\n-    const [errorPassword, setErrorPassword] = useState(false);\r\n-    const [errorPhone, setErrorPhone] = useState(false);\r\n-\r\n     // Fetch roles from API\r\n     useEffect(() => {\r\n         axios.get('http://localhost:5000/api/roles')\r\n-            .then(res => {\r\n-                console.log('Roles in the system:', res.data);\r\n-                setRoleList(res.data);\r\n-            })\r\n+            .then(res => setRoleList(res.data))\r\n             .catch(err => console.error('Failed to fetch roles:', err));\r\n     }, []);\r\n \r\n     const handleChange = (e) => {\r\n@@ -51,24 +42,16 @@\n         const { value } = e.target;\r\n         setSelectPosition(value);\r\n     };\r\n \r\n-    const handleSave = (e) => {\r\n+    const handleSave = () => {\r\n+        if (!editedUser.name) return;\r\n+        if (!selectPosition) return;\r\n+        if (selectPosition === 'เจ้าของร้าน' && !editedUser.username) return;\r\n+        if (!editedUser.password) return;\r\n+        if (!editedUser.phone_number) return;\r\n \r\n-        if (!editedUser.name) { setErrorName(true); return; } setErrorName(false);\r\n-        if (!selectPosition) { setErrorRole(true); return; } setErrorRole(false);\r\n-        if (selectPosition === 'เจ้าของร้าน' && !editedUser.username) { setErrorUsername(true); return; } setErrorUsername(false);\r\n-        if (!editedUser.password) { setErrorPassword(true); return; } setErrorPassword(false);\r\n-        if (!editedUser.phone_number) { setErrorPhone(true); return; } setErrorPhone(false);\r\n-\r\n-\r\n-        const updatedUser = {\r\n-            ...editedUser,\r\n-            role_id: selectPosition\r\n-        };\r\n-        console.log('Updated user:', updatedUser);\r\n-\r\n-\r\n+        const updatedUser = { ...editedUser, role_id: selectPosition };\r\n         onSave(updatedUser);\r\n     };\r\n \r\n     return (\r\n@@ -84,50 +67,50 @@\n                 value={editedUser.name || ''}\r\n                 onChange={handleChange}\r\n                 required\r\n             />\r\n-            {errorName && <div className='text-red'>กรุณากรอกชื่อ</div>}\r\n \r\n             <div style={{ height: '10px' }} />\r\n             <label>ตำแหน่ง (Role)</label>\r\n             <select\r\n                 className=\"form-select\"\r\n                 name=\"role\"\r\n                 value={selectPosition}\r\n                 onChange={handleRoleChange}\r\n-\r\n                 required\r\n             >\r\n                 <option value=\"\" disabled>-- เลือกตำแหน่ง --</option>\r\n                 {roleList.map((item, index) => (\r\n                     <option key={index} value={item._id}>{item.role_name}</option>\r\n                 ))}\r\n             </select>\r\n-            {errorRole && <div className='text-red'>กรุณาเลือกตำแหน่ง</div>}\r\n \r\n             <div style={{ height: '10px' }} />\r\n             <label>Username</label>\r\n             <input\r\n                 type='text'\r\n                 name=\"username\"\r\n                 value={editedUser.username}\r\n                 onChange={handleChange}\r\n-                disabled={editedUser.role_id != \"1\" ? true : false}\r\n+                disabled={selectPosition !== \"เจ้าของร้าน\"} // ปลดล็อกเฉพาะเจ้าของร้าน\r\n             />\r\n-            {errorUsername && <div className='text-red'>กรุณากรอก Username</div>}\r\n \r\n             <div style={{ height: '10px' }} />\r\n-            <label>{editedUser.role === 'เจ้าของร้าน' ? 'Password' : 'รหัส PIN 6 หลัก'}</label>\r\n-            <input\r\n-                type={editedUser.role === 'เจ้าของร้าน' ? 'password' : 'text'}\r\n-                name=\"password\"\r\n-                value={editedUser.password || ''}\r\n-                onChange={handleChange}\r\n-                minLength={6}\r\n-                maxLength={editedUser.role !== 'เจ้าของร้าน' ? 6 : undefined} // Limit PIN to 6 digits\r\n-                required\r\n-            />\r\n-            {errorPassword && <div className='text-red'>กรุณากรอกรหัสผ่าน</div>}\r\n+            <label>{selectPosition === 'เจ้าของร้าน' ? 'Password' : 'รหัส PIN 6 หลัก'}</label>\r\n+            <div className=\"password-input-container\">\r\n+                <input\r\n+                    type={showPassword ? 'text' : 'password'}\r\n+                    name=\"password\"\r\n+                    value={editedUser.password || ''}\r\n+                    onChange={handleChange}\r\n+                    minLength={6}\r\n+                    maxLength={selectPosition !== 'เจ้าของร้าน' ? 6 : undefined} // PIN จำกัด 6 ตัว\r\n+                    required\r\n+                />\r\n+                <button type=\"button\" className=\"visibility-toggle\" onClick={() => setShowPassword(!showPassword)}>\r\n+                    {showPassword ? <VisibilityOff /> : <Visibility />}\r\n+                </button>\r\n+            </div>\r\n \r\n             <div style={{ height: '10px' }} />\r\n             <label>เบอร์โทรศัพท์</label>\r\n             <input\r\n@@ -140,15 +123,13 @@\n                 minLength={10}\r\n                 maxLength={10}\r\n                 required\r\n             />\r\n-            {errorPhone && <div className='text-red'>กรุณากรอกเบอร์โทรศัพท์</div>}\r\n \r\n             <div className=\"order-action-buttons\">\r\n-                <button className=\"blue-button\" onClick={() => handleSave()}>บันทึก</button>\r\n+                <button className=\"blue-button\" onClick={handleSave}>บันทึก</button>\r\n                 <button className=\"red-button\" onClick={onClose}>ยกเลิก</button>\r\n             </div>\r\n-\r\n         </>\r\n     );\r\n };\r\n \r\n"
                },
                {
                    "date": 1740644788696,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -96,21 +96,21 @@\n \r\n             <div style={{ height: '10px' }} />\r\n             <label>{selectPosition === 'เจ้าของร้าน' ? 'Password' : 'รหัส PIN 6 หลัก'}</label>\r\n             <div className=\"password-input-container\">\r\n-                <input\r\n-                    type={showPassword ? 'text' : 'password'}\r\n-                    name=\"password\"\r\n-                    value={editedUser.password || ''}\r\n-                    onChange={handleChange}\r\n-                    minLength={6}\r\n-                    maxLength={selectPosition !== 'เจ้าของร้าน' ? 6 : undefined} // PIN จำกัด 6 ตัว\r\n-                    required\r\n-                />\r\n-                <button type=\"button\" className=\"visibility-toggle\" onClick={() => setShowPassword(!showPassword)}>\r\n-                    {showPassword ? <VisibilityOff /> : <Visibility />}\r\n-                </button>\r\n-            </div>\r\n+    <input\r\n+        type={showPassword ? 'text' : 'password'}\r\n+        name=\"password\"\r\n+        value={editedUser.password || ''}\r\n+        onChange={handleChange}\r\n+        minLength={6}\r\n+        maxLength={selectPosition !== 'เจ้าของร้าน' ? 6 : undefined} // PIN จำกัด 6 ตัว\r\n+        required\r\n+    />\r\n+    <button type=\"button\" className=\"visibility-toggle\" onClick={() => setShowPassword(!showPassword)}>\r\n+        {showPassword ? <VisibilityOff /> : <Visibility />}\r\n+    </button>\r\n+</div>\r\n \r\n             <div style={{ height: '10px' }} />\r\n             <label>เบอร์โทรศัพท์</label>\r\n             <input\r\n"
                },
                {
                    "date": 1740644855177,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,8 @@\n import axios from 'axios';\r\n import React, { useState, useEffect } from 'react';\r\n import { Visibility, VisibilityOff } from '@mui/icons-material';\r\n+import { TextField, IconButton, InputAdornment } from \"@mui/material\";\r\n \r\n const EditUser = ({ user, onClose, onSave, isEditing }) => {\r\n     const [editedUser, setEditedUser] = useState({\r\n         name: '',\r\n@@ -95,22 +96,31 @@\n             />\r\n \r\n             <div style={{ height: '10px' }} />\r\n             <label>{selectPosition === 'เจ้าของร้าน' ? 'Password' : 'รหัส PIN 6 หลัก'}</label>\r\n-            <div className=\"password-input-container\">\r\n-    <input\r\n-        type={showPassword ? 'text' : 'password'}\r\n-        name=\"password\"\r\n-        value={editedUser.password || ''}\r\n-        onChange={handleChange}\r\n-        minLength={6}\r\n-        maxLength={selectPosition !== 'เจ้าของร้าน' ? 6 : undefined} // PIN จำกัด 6 ตัว\r\n-        required\r\n-    />\r\n-    <button type=\"button\" className=\"visibility-toggle\" onClick={() => setShowPassword(!showPassword)}>\r\n-        {showPassword ? <VisibilityOff /> : <Visibility />}\r\n-    </button>\r\n-</div>\r\n+            <TextField\r\n+    fullWidth\r\n+    label={selectPosition === \"เจ้าของร้าน\" ? \"Password\" : \"รหัส PIN 6 หลัก\"}\r\n+    type={showPassword ? \"text\" : \"password\"}\r\n+    variant=\"outlined\"\r\n+    value={editedUser.password || \"\"}\r\n+    onChange={handleChange}\r\n+    margin=\"normal\"\r\n+    inputProps={{\r\n+        minLength: 6,\r\n+        maxLength: selectPosition !== \"เจ้าของร้าน\" ? 6 : undefined, // PIN จำกัด 6 ตัว\r\n+    }}\r\n+    InputProps={{\r\n+        sx: { fontFamily: \"inherit\" },\r\n+        endAdornment: (\r\n+            <InputAdornment position=\"end\">\r\n+                <IconButton onClick={() => setShowPassword(!showPassword)} edge=\"end\">\r\n+                    {showPassword ? <VisibilityOff /> : <Visibility />}\r\n+                </IconButton>\r\n+            </InputAdornment>\r\n+        ),\r\n+    }}\r\n+/>\r\n \r\n             <div style={{ height: '10px' }} />\r\n             <label>เบอร์โทรศัพท์</label>\r\n             <input\r\n"
                },
                {
                    "date": 1740644894996,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -95,32 +95,31 @@\n                 disabled={selectPosition !== \"เจ้าของร้าน\"} // ปลดล็อกเฉพาะเจ้าของร้าน\r\n             />\r\n \r\n             <div style={{ height: '10px' }} />\r\n-            <label>{selectPosition === 'เจ้าของร้าน' ? 'Password' : 'รหัส PIN 6 หลัก'}</label>\r\n             <TextField\r\n-    fullWidth\r\n-    label={selectPosition === \"เจ้าของร้าน\" ? \"Password\" : \"รหัส PIN 6 หลัก\"}\r\n-    type={showPassword ? \"text\" : \"password\"}\r\n-    variant=\"outlined\"\r\n-    value={editedUser.password || \"\"}\r\n-    onChange={handleChange}\r\n-    margin=\"normal\"\r\n-    inputProps={{\r\n-        minLength: 6,\r\n-        maxLength: selectPosition !== \"เจ้าของร้าน\" ? 6 : undefined, // PIN จำกัด 6 ตัว\r\n-    }}\r\n-    InputProps={{\r\n-        sx: { fontFamily: \"inherit\" },\r\n-        endAdornment: (\r\n-            <InputAdornment position=\"end\">\r\n-                <IconButton onClick={() => setShowPassword(!showPassword)} edge=\"end\">\r\n-                    {showPassword ? <VisibilityOff /> : <Visibility />}\r\n-                </IconButton>\r\n-            </InputAdornment>\r\n-        ),\r\n-    }}\r\n-/>\r\n+                fullWidth\r\n+                label={selectPosition === \"เจ้าของร้าน\" ? \"Password\" : \"รหัส PIN 6 หลัก\"}\r\n+                type={showPassword ? \"text\" : \"password\"}\r\n+                variant=\"outlined\"\r\n+                value={editedUser.password || \"\"}\r\n+                onChange={handleChange}\r\n+                margin=\"normal\"\r\n+                inputProps={{\r\n+                    minLength: 6,\r\n+                    maxLength: selectPosition !== \"เจ้าของร้าน\" ? 6 : undefined, // PIN จำกัด 6 ตัว\r\n+                }}\r\n+                InputProps={{\r\n+                    sx: { fontFamily: \"inherit\" },\r\n+                    endAdornment: (\r\n+                        <InputAdornment position=\"end\">\r\n+                            <IconButton onClick={() => setShowPassword(!showPassword)} edge=\"end\">\r\n+                                {showPassword ? <VisibilityOff /> : <Visibility />}\r\n+                            </IconButton>\r\n+                        </InputAdornment>\r\n+                    ),\r\n+                }}\r\n+            />\r\n \r\n             <div style={{ height: '10px' }} />\r\n             <label>เบอร์โทรศัพท์</label>\r\n             <input\r\n"
                },
                {
                    "date": 1740644943893,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,8 @@\n import axios from 'axios';\r\n import React, { useState, useEffect } from 'react';\r\n import { Visibility, VisibilityOff } from '@mui/icons-material';\r\n-import { TextField, IconButton, InputAdornment } from \"@mui/material\";\r\n+import { TextField, IconButton, InputAdornment, Grid } from \"@mui/material\";\r\n \r\n const EditUser = ({ user, onClose, onSave, isEditing }) => {\r\n     const [editedUser, setEditedUser] = useState({\r\n         name: '',\r\n@@ -55,12 +55,12 @@\n         onSave(updatedUser);\r\n     };\r\n \r\n     return (\r\n-        <>\r\n-            <div className=\"fs-20 fw-5 text-center right-box-header\" style={{ marginBottom: '10px' }}>\r\n-                {isEditing ? 'แก้ไขผู้ใช้งาน' : 'เพิ่มผู้ใช้ใหม่'}\r\n-            </div>\r\n+        <>  \r\n+            <Grid sx={{ borderBottom: \"1px solid #ddd\", marginBottom: \"8px\", paddingBottom: \"8px\" }}>\r\n+                <p style={{ fontSize: 18, fontWeight: 500, justifyContent: \"center\" }}>{isEditing ? 'แก้ไขผู้ใช้งาน' : 'เพิ่มผู้ใช้ใหม่'}</p>\r\n+            </Grid>\r\n \r\n             <label>ชื่อพนักงาน</label>\r\n             <input\r\n                 type=\"text\"\r\n"
                },
                {
                    "date": 1740644961763,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -60,8 +60,12 @@\n             <Grid sx={{ borderBottom: \"1px solid #ddd\", marginBottom: \"8px\", paddingBottom: \"8px\" }}>\r\n                 <p style={{ fontSize: 18, fontWeight: 500, justifyContent: \"center\" }}>{isEditing ? 'แก้ไขผู้ใช้งาน' : 'เพิ่มผู้ใช้ใหม่'}</p>\r\n             </Grid>\r\n \r\n+            <TextField>\r\n+                fullWidth\r\n+                label=\"ชื่อพนักงาน\"\r\n+            </TextField>\r\n             <label>ชื่อพนักงาน</label>\r\n             <input\r\n                 type=\"text\"\r\n                 name=\"name\"\r\n"
                },
                {
                    "date": 1740644987833,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -60,12 +60,13 @@\n             <Grid sx={{ borderBottom: \"1px solid #ddd\", marginBottom: \"8px\", paddingBottom: \"8px\" }}>\r\n                 <p style={{ fontSize: 18, fontWeight: 500, justifyContent: \"center\" }}>{isEditing ? 'แก้ไขผู้ใช้งาน' : 'เพิ่มผู้ใช้ใหม่'}</p>\r\n             </Grid>\r\n \r\n-            <TextField>\r\n+            <TextField\r\n                 fullWidth\r\n                 label=\"ชื่อพนักงาน\"\r\n-            </TextField>\r\n+                \r\n+            />\r\n             <label>ชื่อพนักงาน</label>\r\n             <input\r\n                 type=\"text\"\r\n                 name=\"name\"\r\n"
                },
                {
                    "date": 1740644995972,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -63,17 +63,10 @@\n \r\n             <TextField\r\n                 fullWidth\r\n                 label=\"ชื่อพนักงาน\"\r\n-                \r\n-            />\r\n-            <label>ชื่อพนักงาน</label>\r\n-            <input\r\n-                type=\"text\"\r\n-                name=\"name\"\r\n                 value={editedUser.name || ''}\r\n                 onChange={handleChange}\r\n-                required\r\n             />\r\n \r\n             <div style={{ height: '10px' }} />\r\n             <label>ตำแหน่ง (Role)</label>\r\n"
                },
                {
                    "date": 1740645008732,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -63,8 +63,9 @@\n \r\n             <TextField\r\n                 fullWidth\r\n                 label=\"ชื่อพนักงาน\"\r\n+                variant=\"outlined\"\r\n                 value={editedUser.name || ''}\r\n                 onChange={handleChange}\r\n             />\r\n \r\n"
                },
                {
                    "date": 1740645046970,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -66,8 +66,11 @@\n                 label=\"ชื่อพนักงาน\"\r\n                 variant=\"outlined\"\r\n                 value={editedUser.name || ''}\r\n                 onChange={handleChange}\r\n+                onChange={(e) =>\r\n+                    setEditedUser(prev => ({ ...prev, password: e.target.value }))\r\n+                }\r\n             />\r\n \r\n             <div style={{ height: '10px' }} />\r\n             <label>ตำแหน่ง (Role)</label>\r\n"
                },
                {
                    "date": 1740645091661,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -55,9 +55,9 @@\n         onSave(updatedUser);\r\n     };\r\n \r\n     return (\r\n-        <>  \r\n+        <>\r\n             <Grid sx={{ borderBottom: \"1px solid #ddd\", marginBottom: \"8px\", paddingBottom: \"8px\" }}>\r\n                 <p style={{ fontSize: 18, fontWeight: 500, justifyContent: \"center\" }}>{isEditing ? 'แก้ไขผู้ใช้งาน' : 'เพิ่มผู้ใช้ใหม่'}</p>\r\n             </Grid>\r\n \r\n@@ -66,11 +66,9 @@\n                 label=\"ชื่อพนักงาน\"\r\n                 variant=\"outlined\"\r\n                 value={editedUser.name || ''}\r\n                 onChange={handleChange}\r\n-                onChange={(e) =>\r\n-                    setEditedUser(prev => ({ ...prev, password: e.target.value }))\r\n-                }\r\n+\r\n             />\r\n \r\n             <div style={{ height: '10px' }} />\r\n             <label>ตำแหน่ง (Role)</label>\r\n@@ -135,12 +133,12 @@\n                 maxLength={10}\r\n                 required\r\n             />\r\n \r\n-            <div className=\"order-action-buttons\">\r\n+            <Grid display=\"flex\" justifyContent=\"center\" borderTop=\"1px solid #ddd\" sx={{ paddingTop: \"8px\" }}>\r\n                 <button className=\"blue-button\" onClick={handleSave}>บันทึก</button>\r\n                 <button className=\"red-button\" onClick={onClose}>ยกเลิก</button>\r\n-            </div>\r\n+            </Grid>\r\n         </>\r\n     );\r\n };\r\n \r\n"
                },
                {
                    "date": 1740645124962,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -132,10 +132,10 @@\n                 minLength={10}\r\n                 maxLength={10}\r\n                 required\r\n             />\r\n-\r\n-            <Grid display=\"flex\" justifyContent=\"center\" borderTop=\"1px solid #ddd\" sx={{ paddingTop: \"8px\" }}>\r\n+        \r\n+        <Grid display=\"flex\" justifyContent=\"space-between\" borderTop=\"1px solid #ddd\" sx={{ marginTop: \"auto\", paddingTop: \"8px\" }}>\r\n                 <button className=\"blue-button\" onClick={handleSave}>บันทึก</button>\r\n                 <button className=\"red-button\" onClick={onClose}>ยกเลิก</button>\r\n             </Grid>\r\n         </>\r\n"
                },
                {
                    "date": 1740645150041,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,8 +2,9 @@\n import React, { useState, useEffect } from 'react';\r\n import { Visibility, VisibilityOff } from '@mui/icons-material';\r\n import { TextField, IconButton, InputAdornment, Grid } from \"@mui/material\";\r\n \r\n+\r\n const EditUser = ({ user, onClose, onSave, isEditing }) => {\r\n     const [editedUser, setEditedUser] = useState({\r\n         name: '',\r\n         username: '',\r\n@@ -11,9 +12,9 @@\n         role_id: '',\r\n         phone_number: '',\r\n     });\r\n     const [selectPosition, setSelectPosition] = useState('');\r\n-    const [showPassword, setShowPassword] = useState(false); // State for toggling password visibility\r\n+    const [showPassword, setShowPassword] = useState(false);\r\n \r\n     useEffect(() => {\r\n         setEditedUser({\r\n             name: user.name,\r\n@@ -26,9 +27,8 @@\n     }, [user]);\r\n \r\n     const [roleList, setRoleList] = useState([]);\r\n \r\n-    // Fetch roles from API\r\n     useEffect(() => {\r\n         axios.get('http://localhost:5000/api/roles')\r\n             .then(res => setRoleList(res.data))\r\n             .catch(err => console.error('Failed to fetch roles:', err));\r\n@@ -41,67 +41,71 @@\n \r\n     const handleRoleChange = (e) => {\r\n         const { value } = e.target;\r\n         setSelectPosition(value);\r\n+        setEditedUser(prevUser => ({ ...prevUser, role_id: value }));\r\n     };\r\n \r\n     const handleSave = () => {\r\n-        if (!editedUser.name) return;\r\n-        if (!selectPosition) return;\r\n+        if (!editedUser.name || !selectPosition || !editedUser.password || !editedUser.phone_number) return;\r\n         if (selectPosition === 'เจ้าของร้าน' && !editedUser.username) return;\r\n-        if (!editedUser.password) return;\r\n-        if (!editedUser.phone_number) return;\r\n \r\n         const updatedUser = { ...editedUser, role_id: selectPosition };\r\n         onSave(updatedUser);\r\n     };\r\n \r\n     return (\r\n         <>\r\n             <Grid sx={{ borderBottom: \"1px solid #ddd\", marginBottom: \"8px\", paddingBottom: \"8px\" }}>\r\n-                <p style={{ fontSize: 18, fontWeight: 500, justifyContent: \"center\" }}>{isEditing ? 'แก้ไขผู้ใช้งาน' : 'เพิ่มผู้ใช้ใหม่'}</p>\r\n+                <p style={{ fontSize: 18, fontWeight: 500, textAlign: \"center\" }}>\r\n+                    {isEditing ? 'แก้ไขผู้ใช้งาน' : 'เพิ่มผู้ใช้ใหม่'}\r\n+                </p>\r\n             </Grid>\r\n \r\n             <TextField\r\n                 fullWidth\r\n                 label=\"ชื่อพนักงาน\"\r\n                 variant=\"outlined\"\r\n+                name=\"name\"\r\n                 value={editedUser.name || ''}\r\n                 onChange={handleChange}\r\n-\r\n+                margin=\"normal\"\r\n             />\r\n \r\n-            <div style={{ height: '10px' }} />\r\n-            <label>ตำแหน่ง (Role)</label>\r\n-            <select\r\n-                className=\"form-select\"\r\n+            <TextField\r\n+                fullWidth\r\n+                select\r\n+                label=\"ตำแหน่ง (Role)\"\r\n+                variant=\"outlined\"\r\n                 name=\"role\"\r\n                 value={selectPosition}\r\n                 onChange={handleRoleChange}\r\n+                margin=\"normal\"\r\n                 required\r\n             >\r\n-                <option value=\"\" disabled>-- เลือกตำแหน่ง --</option>\r\n+                <MenuItem value=\"\" disabled>-- เลือกตำแหน่ง --</MenuItem>\r\n                 {roleList.map((item, index) => (\r\n-                    <option key={index} value={item._id}>{item.role_name}</option>\r\n+                    <MenuItem key={index} value={item._id}>{item.role_name}</MenuItem>\r\n                 ))}\r\n-            </select>\r\n+            </TextField>\r\n \r\n-            <div style={{ height: '10px' }} />\r\n-            <label>Username</label>\r\n-            <input\r\n-                type='text'\r\n+            <TextField\r\n+                fullWidth\r\n+                label=\"Username\"\r\n+                variant=\"outlined\"\r\n                 name=\"username\"\r\n                 value={editedUser.username}\r\n                 onChange={handleChange}\r\n+                margin=\"normal\"\r\n                 disabled={selectPosition !== \"เจ้าของร้าน\"} // ปลดล็อกเฉพาะเจ้าของร้าน\r\n             />\r\n \r\n-            <div style={{ height: '10px' }} />\r\n             <TextField\r\n                 fullWidth\r\n                 label={selectPosition === \"เจ้าของร้าน\" ? \"Password\" : \"รหัส PIN 6 หลัก\"}\r\n                 type={showPassword ? \"text\" : \"password\"}\r\n                 variant=\"outlined\"\r\n+                name=\"password\"\r\n                 value={editedUser.password || \"\"}\r\n                 onChange={handleChange}\r\n                 margin=\"normal\"\r\n                 inputProps={{\r\n@@ -119,23 +123,22 @@\n                     ),\r\n                 }}\r\n             />\r\n \r\n-            <div style={{ height: '10px' }} />\r\n-            <label>เบอร์โทรศัพท์</label>\r\n-            <input\r\n-                type=\"text\"\r\n+            <TextField\r\n+                fullWidth\r\n+                label=\"เบอร์โทรศัพท์\"\r\n+                variant=\"outlined\"\r\n                 name=\"phone_number\"\r\n                 placeholder='เช่น 0812345678'\r\n-                maxLength=\"10\"\r\n                 value={editedUser.phone_number || ''}\r\n                 onChange={handleChange}\r\n-                minLength={10}\r\n-                maxLength={10}\r\n+                margin=\"normal\"\r\n+                inputProps={{ maxLength: 10, minLength: 10 }}\r\n                 required\r\n             />\r\n-        \r\n-        <Grid display=\"flex\" justifyContent=\"space-between\" borderTop=\"1px solid #ddd\" sx={{ marginTop: \"auto\", paddingTop: \"8px\" }}>\r\n+\r\n+            <Grid display=\"flex\" justifyContent=\"space-between\" borderTop=\"1px solid #ddd\" sx={{ marginTop: \"auto\", paddingTop: \"8px\" }}>\r\n                 <button className=\"blue-button\" onClick={handleSave}>บันทึก</button>\r\n                 <button className=\"red-button\" onClick={onClose}>ยกเลิก</button>\r\n             </Grid>\r\n         </>\r\n"
                },
                {
                    "date": 1740645171118,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,8 @@\n import axios from 'axios';\r\n import React, { useState, useEffect } from 'react';\r\n import { Visibility, VisibilityOff } from '@mui/icons-material';\r\n-import { TextField, IconButton, InputAdornment, Grid } from \"@mui/material\";\r\n+import { TextField, IconButton, InputAdornment, Grid, MenuItem } from \"@mui/material\";\r\n \r\n \r\n const EditUser = ({ user, onClose, onSave, isEditing }) => {\r\n     const [editedUser, setEditedUser] = useState({\r\n"
                },
                {
                    "date": 1740645249146,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -45,13 +45,37 @@\n         setEditedUser(prevUser => ({ ...prevUser, role_id: value }));\r\n     };\r\n \r\n     const handleSave = () => {\r\n-        if (!editedUser.name || !selectPosition || !editedUser.password || !editedUser.phone_number) return;\r\n-        if (selectPosition === 'เจ้าของร้าน' && !editedUser.username) return;\r\n-\r\n+        if (!editedUser.name || !selectPosition || !editedUser.password || !editedUser.phone_number) {\r\n+            Swal.fire({\r\n+                icon: \"warning\",\r\n+                title: \"กรุณากรอกข้อมูลให้ครบถ้วน!\",\r\n+                confirmButtonText: \"ตกลง\"\r\n+            });\r\n+            return;\r\n+        }\r\n+        if (selectPosition === 'เจ้าของร้าน' && !editedUser.username) {\r\n+            Swal.fire({\r\n+                icon: \"warning\",\r\n+                title: \"กรุณากรอก Username!\",\r\n+                confirmButtonText: \"ตกลง\"\r\n+            });\r\n+            return;\r\n+        }\r\n+    \r\n         const updatedUser = { ...editedUser, role_id: selectPosition };\r\n         onSave(updatedUser);\r\n+    \r\n+        // ✅ แจ้งเตือนเมื่อบันทึกสำเร็จ\r\n+        Swal.fire({\r\n+            icon: \"success\",\r\n+            title: \"บันทึกข้อมูลสำเร็จ!\",\r\n+            showConfirmButton: false,\r\n+            timer: 1500\r\n+        });\r\n+    \r\n+        onClose(); // ปิด Modal หรือหน้าต่างหลังจากกด OK\r\n     };\r\n \r\n     return (\r\n         <>\r\n"
                },
                {
                    "date": 1740645258386,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,9 @@\n import axios from 'axios';\r\n import React, { useState, useEffect } from 'react';\r\n import { Visibility, VisibilityOff } from '@mui/icons-material';\r\n import { TextField, IconButton, InputAdornment, Grid, MenuItem } from \"@mui/material\";\r\n+import Swal from 'sweetalert2';\r\n \r\n \r\n const EditUser = ({ user, onClose, onSave, isEditing }) => {\r\n     const [editedUser, setEditedUser] = useState({\r\n"
                },
                {
                    "date": 1740645332434,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -162,10 +162,11 @@\n                 required\r\n             />\r\n \r\n             <Grid display=\"flex\" justifyContent=\"space-between\" borderTop=\"1px solid #ddd\" sx={{ marginTop: \"auto\", paddingTop: \"8px\" }}>\r\n-                <button className=\"blue-button\" onClick={handleSave}>บันทึก</button>\r\n-                <button className=\"red-button\" onClick={onClose}>ยกเลิก</button>\r\n+            <button className=\"red-button\" onClick={onClose}>ปิด</button>\r\n+            <button className=\"blue-button\" onClick={handleSave}>บันทึก</button>\r\n+                \r\n             </Grid>\r\n         </>\r\n     );\r\n };\r\n"
                },
                {
                    "date": 1740645533069,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -162,11 +162,10 @@\n                 required\r\n             />\r\n \r\n             <Grid display=\"flex\" justifyContent=\"space-between\" borderTop=\"1px solid #ddd\" sx={{ marginTop: \"auto\", paddingTop: \"8px\" }}>\r\n-            <button className=\"red-button\" onClick={onClose}>ปิด</button>\r\n-            <button className=\"blue-button\" onClick={handleSave}>บันทึก</button>\r\n-                \r\n+                <button className=\"red-button\" onClick={onClose}>ปิด</button>\r\n+                <button className=\"blue-button\" onClick={handleSave}>บันทึก</button>\r\n             </Grid>\r\n         </>\r\n     );\r\n };\r\n"
                },
                {
                    "date": 1740645558229,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -120,9 +120,9 @@\n                 name=\"username\"\r\n                 value={editedUser.username}\r\n                 onChange={handleChange}\r\n                 margin=\"normal\"\r\n-                disabled={selectPosition !== \"เจ้าของร้าน\"} // ปลดล็อกเฉพาะเจ้าของร้าน\r\n+                disabled={selectPosition !== \"1\"} // ปลดล็อกเฉพาะเจ้าของร้าน\r\n             />\r\n \r\n             <TextField\r\n                 fullWidth\r\n"
                },
                {
                    "date": 1740645971122,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,16 +17,17 @@\n     const [showPassword, setShowPassword] = useState(false);\r\n \r\n     useEffect(() => {\r\n         setEditedUser({\r\n-            name: user.name,\r\n+            name: user.name || '',\r\n             username: user.role === 'เจ้าของร้าน' ? user.username : 'employee',\r\n-            password: user.password,\r\n-            role_id: user.role_id,\r\n-            phone_number: user.phone_number,\r\n+            password: user.password || '',\r\n+            role_id: user.role_id || '',\r\n+            phone_number: user.phone_number || '',\r\n         });\r\n-        handleRoleChange({ target: { value: user.role_id } });\r\n+        setSelectPosition(user.role_id || '');\r\n     }, [user]);\r\n+    \r\n \r\n     const [roleList, setRoleList] = useState([]);\r\n \r\n     useEffect(() => {\r\n"
                },
                {
                    "date": 1740646001571,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,11 +42,12 @@\n     };\r\n \r\n     const handleRoleChange = (e) => {\r\n         const { value } = e.target;\r\n-        setSelectPosition(value);\r\n-        setEditedUser(prevUser => ({ ...prevUser, role_id: value }));\r\n+        setSelectPosition(value || '');\r\n+        setEditedUser(prevUser => ({ ...prevUser, role_id: value || '' }));\r\n     };\r\n+    \r\n \r\n     const handleSave = () => {\r\n         if (!editedUser.name || !selectPosition || !editedUser.password || !editedUser.phone_number) {\r\n             Swal.fire({\r\n"
                },
                {
                    "date": 1740646075757,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,12 +42,18 @@\n     };\r\n \r\n     const handleRoleChange = (e) => {\r\n         const { value } = e.target;\r\n-        setSelectPosition(value || '');\r\n-        setEditedUser(prevUser => ({ ...prevUser, role_id: value || '' }));\r\n+        setSelectPosition(value);\r\n+        \r\n+        setEditedUser(prevUser => ({\r\n+            ...prevUser,\r\n+            role_id: value,\r\n+            username: value === \"1\" ? prevUser.username : \"employee\", // ถ้าไม่ใช่เจ้าของร้าน ให้ username เป็น \"employee\"\r\n+        }));\r\n     };\r\n     \r\n+    \r\n \r\n     const handleSave = () => {\r\n         if (!editedUser.name || !selectPosition || !editedUser.password || !editedUser.phone_number) {\r\n             Swal.fire({\r\n"
                },
                {
                    "date": 1740646112883,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -47,13 +47,11 @@\n         \r\n         setEditedUser(prevUser => ({\r\n             ...prevUser,\r\n             role_id: value,\r\n-            username: value === \"1\" ? prevUser.username : \"employee\", // ถ้าไม่ใช่เจ้าของร้าน ให้ username เป็น \"employee\"\r\n+            username: value === \"1\" ? prevUser.username : \"employee\",\r\n         }));\r\n     };\r\n-    \r\n-    \r\n \r\n     const handleSave = () => {\r\n         if (!editedUser.name || !selectPosition || !editedUser.password || !editedUser.phone_number) {\r\n             Swal.fire({\r\n"
                },
                {
                    "date": 1740646182715,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,16 +18,19 @@\n \r\n     useEffect(() => {\r\n         setEditedUser({\r\n             name: user.name || '',\r\n-            username: user.role === 'เจ้าของร้าน' ? user.username : 'employee',\r\n+            username: isEditing\r\n+                ? user.username // ถ้าเป็นการแก้ไข ให้ใช้ username เดิมที่เคยกรอก\r\n+                : user.role === 'เจ้าของร้าน'\r\n+                    ? user.username\r\n+                    : 'employee', // ถ้าเป็นการเพิ่มใหม่ และไม่ใช่เจ้าของร้าน ให้ default เป็น \"employee\"\r\n             password: user.password || '',\r\n             role_id: user.role_id || '',\r\n             phone_number: user.phone_number || '',\r\n         });\r\n         setSelectPosition(user.role_id || '');\r\n-    }, [user]);\r\n-    \r\n+    }, [user, isEditing]);\r\n \r\n     const [roleList, setRoleList] = useState([]);\r\n \r\n     useEffect(() => {\r\n"
                }
            ],
            "date": 1740643706658,
            "name": "Commit-0",
            "content": "import axios from 'axios';\r\nimport React, { useState, useEffect } from 'react';\r\n\r\nconst EditUser = ({ user, onClose, onSave, isEditing}) => {\r\n\r\n    const [editedUser, setEditedUser] = useState({\r\n        name: '',\r\n        username: '',\r\n        password:  '',\r\n        role_id: '',\r\n        phone_number: '',\r\n    });\r\n    const [selectPosition, setSelectPosition] = useState('');\r\n\r\n    useEffect(() => {\r\n        setEditedUser({\r\n            name: user.name,\r\n            username: user.role === 'เจ้าของร้าน' ? user.username : 'employee',\r\n            password: user.password,\r\n            role_id: user.role_id,\r\n            phone_number: user.phone_number,\r\n        });\r\n        handleRoleChange({ target: { value: user.role_id } });\r\n    }, [user]);\r\n\r\n    const [roleList, setRoleList] = useState([]);\r\n\r\n    //error state\r\n    const [errorName, setErrorName] = useState(false);\r\n    const [errorRole, setErrorRole] = useState(false);\r\n    const [errorUsername, setErrorUsername] = useState(false);\r\n    const [errorPassword, setErrorPassword] = useState(false);\r\n    const [errorPhone, setErrorPhone] = useState(false);\r\n\r\n    // Fetch roles from API\r\n    useEffect(() => {\r\n        axios.get('http://localhost:5000/api/roles')\r\n            .then(res => {\r\n                console.log('Roles in the system:', res.data);\r\n                setRoleList(res.data);\r\n            })\r\n            .catch(err => console.error('Failed to fetch roles:', err));\r\n    }, []);\r\n\r\n    const handleChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setEditedUser(prevUser => ({ ...prevUser, [name]: value }));\r\n    };\r\n\r\n    const handleRoleChange = (e) => {\r\n        const { value } = e.target;\r\n        setSelectPosition(value);\r\n    };\r\n\r\n    const handleSave = (e) => {\r\n\r\n        if (!editedUser.name) { setErrorName(true); return; } setErrorName(false);\r\n        if (!selectPosition) { setErrorRole(true); return; } setErrorRole(false);\r\n        if (selectPosition === 'เจ้าของร้าน' && !editedUser.username) { setErrorUsername(true); return;} setErrorUsername(false);\r\n        if (!editedUser.password) { setErrorPassword(true); return; } setErrorPassword(false);\r\n        if (!editedUser.phone_number) { setErrorPhone(true); return; } setErrorPhone(false);\r\n\r\n\r\n        const updatedUser = {\r\n            ...editedUser,\r\n            role_id: selectPosition\r\n        };\r\n        console.log('Updated user:', updatedUser);\r\n\r\n\r\n        onSave(updatedUser);\r\n    };\r\n\r\n    return (\r\n        <>\r\n                <div className=\"fs-20 fw-5 text-center right-box-header\" style={{ marginBottom: '10px' }}>\r\n                    {isEditing ? 'แก้ไขผู้ใช้งาน' : 'เพิ่มผู้ใช้ใหม่'}\r\n                </div>\r\n\r\n                <label>ชื่อพนักงาน</label>\r\n                <input\r\n                    type=\"text\"\r\n                    name=\"name\"\r\n                    value={editedUser.name || ''}\r\n                    onChange={handleChange}\r\n                    required\r\n                />\r\n                {errorName && <div className='text-red'>กรุณากรอกชื่อ</div>}\r\n\r\n                <div style={{height:'10px'}} />\r\n                <label>ตำแหน่ง (Role)</label>\r\n                <select\r\n                    className=\"form-select\"\r\n                    name=\"role\"\r\n                    value={selectPosition}\r\n                    onChange={handleRoleChange}\r\n                    \r\n                    required\r\n                >\r\n                    <option value=\"\" disabled>-- เลือกตำแหน่ง --</option>\r\n                    {roleList.map((item,index) => (\r\n                        <option key={index} value={item._id}>{item.role_name}</option>\r\n                    ))}\r\n                </select>\r\n                {errorRole && <div className='text-red'>กรุณาเลือกตำแหน่ง</div>}\r\n\r\n                <div style={{height:'10px'}} />\r\n                <label>Username</label>\r\n                <input\r\n                    type='text'\r\n                    name=\"username\"\r\n                    value={editedUser.username}\r\n                    onChange={handleChange}\r\n                    disabled = {editedUser.role_id != \"1\" ? true : false}\r\n                />\r\n                {errorUsername && <div className='text-red'>กรุณากรอก Username</div>}\r\n\r\n                <div style={{height:'10px'}} />\r\n                <label>{editedUser.role === 'เจ้าของร้าน' ? 'Password' : 'รหัส PIN 6 หลัก'}</label>\r\n                <input\r\n                    type={editedUser.role === 'เจ้าของร้าน' ? 'password' : 'text'}\r\n                    name=\"password\"\r\n                    value={editedUser.password || ''}\r\n                    onChange={handleChange}\r\n                    minLength={6}\r\n                    maxLength={editedUser.role !== 'เจ้าของร้าน' ? 6 : undefined} // Limit PIN to 6 digits\r\n                    required\r\n                />\r\n                {errorPassword && <div className='text-red'>กรุณากรอกรหัสผ่าน</div>}\r\n\r\n                <div style={{height:'10px'}} />\r\n                <label>เบอร์โทรศัพท์</label>\r\n                <input\r\n                    type=\"text\"\r\n                    name=\"phone_number\"\r\n                    placeholder='เช่น 0812345678'\r\n                    maxLength=\"10\"\r\n                    value={editedUser.phone_number || ''}\r\n                    onChange={handleChange}\r\n                    minLength={10}\r\n                    maxLength={10}\r\n                    required\r\n                />\r\n                {errorPhone && <div className='text-red'>กรุณากรอกเบอร์โทรศัพท์</div>}\r\n\r\n                <div className=\"order-action-buttons\">\r\n                    <button className=\"blue-button\" onClick={()=>handleSave()}>บันทึก</button>\r\n                    <button className=\"red-button\" onClick={onClose}>ยกเลิก</button>\r\n                </div>\r\n            \r\n        </>\r\n    );\r\n};\r\n\r\nexport default EditUser;\r\n"
        }
    ]
}