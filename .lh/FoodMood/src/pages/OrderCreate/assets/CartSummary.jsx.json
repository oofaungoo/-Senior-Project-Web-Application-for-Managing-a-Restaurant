{
    "sourceFile": "FoodMood/src/pages/OrderCreate/assets/CartSummary.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1739620835698,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1739625292953,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,8 +44,10 @@\n             contactInfo: isDineIn ? { tableNumber } : { phoneNumber },\r\n             orderDate: new Date().toLocaleDateString('en-GB'),\r\n             orderTime: new Date().toLocaleTimeString(),\r\n         };\r\n+\r\n+        \r\n         onSave(newOrder);\r\n     };\r\n \r\n     return (\r\n"
                }
            ],
            "date": 1739620835698,
            "name": "Commit-0",
            "content": "import React, { useState, useEffect } from 'react';\r\nimport { FaRegTrashAlt } from \"react-icons/fa\";\r\n\r\nconst CartSummary = ({ cartItems, totalPrice, handleEditItem, handleRemoveItem, onSave }) => {\r\n    const [paidOption, setPaidOption] = useState('‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏');\r\n    const [phoneNumber, setPhoneNumber] = useState('');\r\n    const [tableNumber, setTableNumber] = useState('');\r\n    const [orderNumber, setOrderNumber] = useState(null); // ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏•‡∏Ç‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î\r\n\r\n    useEffect(() => {\r\n        const fetchLatestOrderNumber = async () => {\r\n            try {\r\n                const todayDate = new Date().toLocaleDateString('en-GB'); // DD/MM/YYYY\r\n                const response = await fetch('http://localhost:5000/api/orders'); // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î\r\n                const orders = await response.json();\r\n\r\n                // ‡∏´‡∏≤‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏Ç‡∏≠‡∏á‡∏ß‡∏±‡∏ô‡∏ô‡∏±‡πâ‡∏ô ‡πÜ\r\n                const todayOrders = orders.filter(order => order.orderDate === todayDate);\r\n                const latestOrder = todayOrders.sort((a, b) => b.orderNumber - a.orderNumber)[0];\r\n\r\n                setOrderNumber(latestOrder ? latestOrder.orderNumber + 1 : 1);\r\n            } catch (error) {\r\n                console.error('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ fecth ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å database‡πÑ‡∏î‡πâ:', error);\r\n            }\r\n        };\r\n\r\n        fetchLatestOrderNumber();\r\n    }, []);\r\n\r\n    const handlePaidOptionChange = (e) => {\r\n        setPaidOption(e.target.value);\r\n        setPhoneNumber('');\r\n        setTableNumber('');\r\n    };\r\n\r\n    const isDineIn = paidOption === '‡∏ó‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏£‡πâ‡∏≤‡∏ô';\r\n\r\n    const handleSave = () => {\r\n        const newOrder = {\r\n            orderNumber, // ‡∏™‡πà‡∏á‡πÄ‡∏•‡∏Ç‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÑ‡∏õ‡∏î‡πâ‡∏ß‡∏¢\r\n            items: cartItems,\r\n            total: totalPrice,\r\n            orderType: paidOption,\r\n            contactInfo: isDineIn ? { tableNumber } : { phoneNumber },\r\n            orderDate: new Date().toLocaleDateString('en-GB'),\r\n            orderTime: new Date().toLocaleTimeString(),\r\n        };\r\n        onSave(newOrder);\r\n    };\r\n\r\n    return (\r\n        <div className=\"cart-summary\">\r\n            <div className='right-box-header fs-26 fw-5 text-center'>\r\n                {orderNumber !== null ? `‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà ${orderNumber}` : '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...'}\r\n            </div>\r\n\r\n            <div className='fs-18 fw-5' style={{ marginTop: \"10px\" }}>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏™‡∏±‡πà‡∏á</div>\r\n            <ul>\r\n                {cartItems.map((item, index) => (\r\n                    <li className='cart-item-column' style={{ marginTop: \"5px\" }} key={index}>\r\n                        <div className=\"cart-item-details\">\r\n                            <span className=\"quantity-box\">{item.quantity}</span>\r\n                            <div className=\"item-info\">\r\n                                <div className=\"item-name\">{item.name}</div>\r\n                                <div className=\"item-size-note fs-14\">\r\n                                    {item.size}\r\n                                    {item.selectedOptions && Object.keys(item.selectedOptions).length > 0 && (\r\n                                        <div className=\"selected-options\">\r\n                                            <ul>\r\n                                                {Object.entries(item.selectedOptions).map(([label, option]) => (\r\n                                                    <li key={label}>{label}: {option}</li>\r\n                                                ))}\r\n                                            </ul>\r\n                                        </div>\r\n                                    )}\r\n                                    {item.note && <div className='text-dark-grey'>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: {item.note}</div>}\r\n                                </div>\r\n                            </div>\r\n                            <span className=\"cart-item-price\">{item.price * item.quantity}</span>\r\n                        </div>\r\n                        <div className='order-edit-del'>\r\n                            <button onClick={() => handleEditItem(index)} className='text-blue invisible-btn fs-14 fw-5' style={{ marginLeft: \"28px\" }}>‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>\r\n                            <button onClick={() => handleRemoveItem(index)} className='text-red invisible-btn fs-14 fw-5'><FaRegTrashAlt /></button>\r\n                        </div>\r\n                    </li>\r\n                ))}\r\n            </ul>\r\n\r\n            <div className='right-box-header'>\r\n                <div className=\"total-price fs-18 fw-5\">\r\n                    <span>‡∏£‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ß‡∏°:</span>\r\n                    <span className='right'>{totalPrice}</span>\r\n                </div>\r\n            </div>\r\n\r\n            <div style={{ marginTop: \"10px\" }}>\r\n                <label>‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏≠‡∏≤‡∏´‡∏≤‡∏£: </label>\r\n                <select value={paidOption} onChange={handlePaidOptionChange}>\r\n                    <option value=\"‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏\">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏</option>\r\n                    <option value=\"‡∏ó‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏£‡πâ‡∏≤‡∏ô\">üçΩÔ∏è ‡∏ó‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏£‡πâ‡∏≤‡∏ô</option>\r\n                    <option value=\"‡∏Å‡∏•‡∏±‡∏ö‡∏ö‡πâ‡∏≤‡∏ô\">üè† ‡∏Å‡∏•‡∏±‡∏ö‡∏ö‡πâ‡∏≤‡∏ô</option>\r\n                    <option value=\"Delivery\">üöö Delivery</option>\r\n                    <option value=\"‡∏™‡∏±‡πà‡∏á‡πÅ‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏à‡πà‡∏≤‡∏¢\">üéâ ‡∏™‡∏±‡πà‡∏á‡πÅ‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏à‡πà‡∏≤‡∏¢</option>\r\n                </select>\r\n            </div>\r\n\r\n            {paidOption !== '‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏' && (\r\n                <div style={{ marginTop: \"10px\" }}>\r\n                    <label>{isDineIn ? \"‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡πÇ‡∏ï‡πä‡∏∞: \" : \"‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£: \"}</label>\r\n                    <input\r\n                        type=\"text\"\r\n                        value={isDineIn ? tableNumber : phoneNumber}\r\n                        onChange={(e) => isDineIn ? setTableNumber(e.target.value) : setPhoneNumber(e.target.value)}\r\n                        placeholder={isDineIn ? \"‡∏£‡∏∞‡∏ö‡∏∏‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡πÇ‡∏ï‡πä‡∏∞\" : \"‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£\"}\r\n                    />\r\n                </div>\r\n            )}\r\n\r\n            <div style={{ marginTop: \"10px\" }}>\r\n                <button className=\"blue-button\" onClick={handleSave}>‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á</button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CartSummary;\r\n"
        }
    ]
}